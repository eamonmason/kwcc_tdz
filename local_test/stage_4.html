<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stage 4 - London | KWCC TdZ 2026</title>
    <link rel="stylesheet" href="css/styles.css">
<style>
    .sortable { cursor: pointer; user-select: none; }
    .sortable:hover { background-color: rgba(0,0,0,0.05); }
    .sortable::after { content: ' ⇅'; opacity: 0.3; }
    .sortable.asc::after { content: ' ↑'; opacity: 1; }
    .sortable.desc::after { content: ' ↓'; opacity: 1; }
    .penalty-indicator { color: #dc3545; font-weight: bold; }
    .penalty-row { background-color: rgba(220, 53, 69, 0.05); }
</style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <h1 class="site-title">
                <a href="index.html">KWCC Tour de Zwift 2026</a>
            </h1>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="gc.html">GC Standings</a></li>
                    <li><a href="stage_1.html">Stage 1</a></li>
                    <li><a href="stage_2.html">Stage 2</a></li>
                    <li><a href="stage_3.html">Stage 3</a></li>
                    <li><a href="stage_4.html">Stage 4</a></li>
                    <li><a href="stage_5.html">Stage 5</a></li>
                    <li><a href="stage_6.html">Stage 6</a></li>
                </ul>
            </nav>
        </div>
    </header>


    <main class="main-content">
        <div class="container">
<div class="stage-header">
    <nav class="stage-nav">
        <a href="stage_3.html" class="nav-prev">&larr; Stage 3</a>
        <a href="stage_5.html" class="nav-next">Stage 5 &rarr;</a>
    </nav>

    <h2>Stage 4: London</h2>
    <div class="stage-details">
        <span class="route">London 8</span>
        <span class="distance">20.9km</span>
        <span class="elevation">223m elevation</span>
    </div>

</div>

<div class="stage-results">
    <section class="group-results" id="group-a">
        <h3>Group A Results</h3>
        <p class="no-results">No results yet for Group A</p>
    </section>

    <section class="group-results" id="group-b">
        <h3>Group B Results</h3>
        <p class="no-results">No results yet for Group B</p>
    </section>
</div>

<section class="penalty-legend">
    <h4>Penalty Information</h4>
    <p>
        <span class="penalty-indicator">*</span> indicates riders who rode a penalty event.
        Monday 5pm and 6pm UTC events carry a time penalty.
    </p>
    <p>
        <strong>Adjusted Time</strong> = Raw Time + Handicap + Penalty
    </p>
</section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>
                Last updated: 2026-01-11 19:25 UTC
            </p>
            <p class="footer-links">
                <a href="https://zwiftpower.com" target="_blank">ZwiftPower</a> |
                <a href="https://www.zwift.com/tour-de-zwift" target="_blank">Tour de Zwift</a>
            </p>
        </div>
    </footer>

<script>
// Sortable table functionality
document.querySelectorAll('.sortable-table').forEach(table => {
    const headers = table.querySelectorAll('th.sortable');

    headers.forEach(header => {
        header.addEventListener('click', () => {
            const sortKey = header.dataset.sort;
            const sortType = header.dataset.type;
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));

            // Determine sort direction
            const isAsc = header.classList.contains('asc');

            // Clear all sort indicators
            headers.forEach(h => h.classList.remove('asc', 'desc'));

            // Set new sort direction
            header.classList.add(isAsc ? 'desc' : 'asc');

            // Sort rows
            rows.sort((a, b) => {
                let aVal = a.dataset[sortKey];
                let bVal = b.dataset[sortKey];

                if (sortType === 'number') {
                    aVal = parseFloat(aVal) || 0;
                    bVal = parseFloat(bVal) || 0;
                }

                if (aVal < bVal) return isAsc ? 1 : -1;
                if (aVal > bVal) return isAsc ? -1 : 1;
                return 0;
            });

            // Reorder DOM
            rows.forEach(row => tbody.appendChild(row));
        });
    });
});
</script>
</body>
</html>